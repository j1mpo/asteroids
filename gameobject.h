// GameObject.h
#pragma once
#include <string>
#include "gamestate.h"

class GameObject
{
protected:
    std::string m_name;
    bool m_active = true;
    GameState* m_state;  // ??????? ??? GameState
    static int m_next_id;  // ??????? ????? ??? ?? ??????? ?? ??????? ID
    int m_id;

public:
    // ????????????? ????? ??????????? (?????? ?? ??????? ??? ?? ???????????? ??????????? ????? ???????????)
    GameObject() : m_state(nullptr), m_name(""), m_id(m_next_id++) {}

    // ????????????? ??? ??????? ?? GameState* ??? ?? ????? ??? GameObject
    GameObject(GameState* state, const std::string& name = "")
        : m_state(state), m_name(name), m_id(m_next_id++) {
    }

    virtual ~GameObject() {}

    virtual void update(float dt) {}
    virtual void init() {}
    virtual void draw() {}

    bool isActive() { return m_active; }
    void setActive(bool a) { m_active = a; }

    int getId() const { return m_id; }
};

// ???????? ?? ??????? ????? m_next_id
int GameObject::m_next_id = 1;
